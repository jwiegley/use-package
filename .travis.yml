language: generic
dist: trusty
addons:
  apt:
    packages:
      - emacs
script: make test
before_deploy: cd doc && make doc HUGO_BASE_URL=https://jwiegley.github.io/use-package/
deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  local_dir: doc/public
  on:
    branch: doc-site-cd
notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/848b93e13f8e6ab0cc86
    on_success: always
    on_failure: always
    on_start: always
